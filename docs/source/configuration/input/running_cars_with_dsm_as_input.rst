.. _input_dsm:

Running CARS with DSM as input
------------------------------

CARS can also be launched with DSM as inputs. The standard pipeline launched is just a merging of the DSM. 

However filling steps can also be performed after the merging if the needed information are given in the configuration file (classification and initial_elevation to fill the DSM, sensors to fill the ortho image)

+----------------------------+--------------------------------------------------------------------------------+-----------------------------+----------------------+----------+
| Name                       | Description                                                                    | Type                        | Default value        | Required |
+============================+================================================================================+=============================+======================+==========+
| *dsm*                      | List of DSM to merge                                                           | dict                        | No                   | Yes      |
+----------------------------+--------------------------------------------------------------------------------+-----------------------------+----------------------+----------+
| *roi*                      | Region Of Interest: Vector file path or GeoJson dictionary                     | string or dict              | None                 | No       |
+----------------------------+--------------------------------------------------------------------------------+-----------------------------+----------------------+----------+
| *initial_elevation*        | Low resolution DEM (used for DSM filling)                                      | string or dict              | No                   | No       |
+----------------------------+--------------------------------------------------------------------------------+-----------------------------+----------------------+----------+
| *sensors*                  | Stereo sensor images used to generate the DSM                                  | dict                        | No                   | No       |
+----------------------------+--------------------------------------------------------------------------------+-----------------------------+----------------------+----------+
| *pairing*                  | Association of sensor images used to generate the DSM                          | list of pairs of *sensors*  | No                   | No (*)   |
+----------------------------+--------------------------------------------------------------------------------+-----------------------------+----------------------+----------+

(*) `pairing` is required if `sensors` parameter is set and contains more than two sensors

For each DSM, give a particular name (what you want):

.. include-cars-config:: ../../example_configs/configuration/inputs_dsms

These input files can be generated by running CARS with `product_level: ["dsm"]` and `auxiliary` dictionary filled with desired auxiliary files

.. note::

    Only one method for performance map generation should have been selected: only two dimensions rasters for `dsm_inf*.tif`, `dsm_sup*.tif`, `performance_map.tif` are supported.
    
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| Name                       | Description                                                               | Type           | Default value | Required |
+============================+===========================================================================+================+===============+==========+
| *dsm*                      | Path to the dsm file                                                      | string         |               | Yes      |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *weights*                  | Path to the weights file                                                  | string         |               | Yes      |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *image*                    | Path to the texture file                                                  | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *merging_classification*           | Path to the classification file                                   | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *mask*                     | Path to the mask file                                                     | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *merging_filling*                  | Path to the filling file                                          | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *performance_map*          | Path to the performance_map file                                          | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *contributing_pair*        | Path to the contributing_pair file                                        | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_inf*                  | Path to the dsm_inf file                                                  | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_sup*                  | Path to the dsm_sup file                                                  | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_mean*                 | Path to the dsm_mean file                                                 | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_std*                  | Path to the dsm_std file                                                  | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_inf_mean*             | Path to the dsm_inf_mean file                                             | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_inf_std*              | Path to the dsm_inf_std file                                              | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_sup_mean*             | Path to the dsm_sup_mean file                                             | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_sup_std*              | Path to the dsm_sup_std file                                              | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_n_pts*                | Path to the dsm_n_pts file                                                | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *dsm_pts_in_cell*          | Path to the dsm_pts_in_cell file                                          | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
| *ambiguity*	             | Path to the ambiguity                                                     | string         |               | No       |
+----------------------------+---------------------------------------------------------------------------+----------------+---------------+----------+
