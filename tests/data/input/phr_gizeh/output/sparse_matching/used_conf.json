{
  "orchestrator": {
    "mode": "multiprocessing",
    "nb_workers": 5,
    "max_ram_per_worker": 2000,
    "mp_mode": "forkserver",
    "task_timeout": 600,
    "max_tasks_per_worker": 10,
    "dump_to_disk": true,
    "per_job_timeout": 600,
    "factorize_tasks": true,
    "profiling": {
      "mode": "cars_profiling",
      "loop_testing": false
    }
  },
  "inputs": {
    "sensors": {
      "one": {
        "image": "tests/data/input/phr_gizeh/img1.tif",
        "geomodel": {
          "path": "tests/data/input/phr_gizeh/img1.geom",
          "model_type": "RPC"
        },
        "color": "tests/data/input/phr_gizeh/img1.tif",
        "no_data": 0,
        "mask": null,
        "classification": null
      },
      "two": {
        "image": "tests/data/input/phr_gizeh/img2.tif",
        "geomodel": {
          "path": "tests/data/input/phr_gizeh/img2.geom",
          "model_type": "RPC"
        },
        "color": "tests/data/input/phr_gizeh/img2.tif",
        "no_data": 0,
        "mask": null,
        "classification": null
      },
      "three": {
        "image": "tests/data/input/phr_gizeh/img3.tif",
        "geomodel": {
          "path": "tests/data/input/phr_gizeh/img3.geom",
          "model_type": "RPC"
        },
        "color": "tests/data/input/phr_gizeh/img3.tif",
        "no_data": 0,
        "mask": null,
        "classification": null
      }
    },
    "pairing": [
      [
        "one",
        "two"
      ],
      [
        "one",
        "three"
      ]
    ],
    "initial_elevation": {
      "dem": "tests/data/input/phr_gizeh/srtm_dir/N29E031_KHEOPS.tif",
      "geoid": "/home/mroux/Code/cars/cars/pipelines/parameters/../../conf/geoid/egm96.grd"
    },
    "roi": null
  },
  "advanced": {
    "save_intermediate_data": false,
    "debug_with_roi": false,
    "phasing": null,
    "merging": false,
    "dsm_merging_tile_size": 4000,
    "performance_map_classes": [
      0,
      0.968,
      1.13375,
      1.295,
      1.604,
      2.423,
      3.428
    ],
    "ground_truth_dsm": {},
    "use_epipolar_a_priori": false,
    "epipolar_a_priori": {},
    "terrain_a_priori": {},
    "geometry_plugin": "SharelocGeometry",
    "pipeline": "default"
  },
  "output": {
    "directory": "/home/mroux/Code/cars/tests/data/input/phr_gizeh/output/sparse_matching",
    "product_level": [],
    "geoid": false,
    "epsg": null,
    "resolution": 0.5,
    "save_by_pair": false,
    "auxiliary": {
      "color": true,
      "weights": false,
      "mask": false,
      "classification": false,
      "performance_map": false,
      "contributing_pair": false,
      "filling": false,
      "ambiguity": false
    }
  },
  "applications": {
    "grid_generation": {
      "save_intermediate_data": false,
      "method": "epipolar",
      "epi_step": 30
    },
    "resampling": {
      "save_intermediate_data": false,
      "method": "bicubic",
      "strip_height": 60,
      "interpolator_image": "bicubic",
      "interpolator_color": "bicubic",
      "interpolator_classif": "nearest",
      "interpolator_mask": "nearest",
      "step": 500
    },
    "ground_truth_reprojection": {
      "save_intermediate_data": false
    },
    "hole_detection": {
      "save_intermediate_data": false,
      "method": "cloud_to_bbox"
    },
    "dense_match_filling.1": {
      "save_intermediate_data": false,
      "method": "zero_padding",
      "classification": null
    },
    "dense_match_filling.2": {
      "save_intermediate_data": false,
      "method": "zero_padding",
      "classification": null
    },
    "sparse_matching.sift": {
      "save_intermediate_data": true,
      "decimation_factor": 100,
      "method": "sift",
      "disparity_margin": 0.02,
      "elevation_delta_lower_bound": -500,
      "elevation_delta_upper_bound": 1000,
      "strip_margin": 10,
      "epipolar_error_upper_bound": 10.0,
      "epipolar_error_maximum_bias": 0.0,
      "minimum_nb_matches": 100,
      "sift_matching_threshold": 0.7,
      "sift_n_octave": 8,
      "sift_n_scale_per_octave": 3,
      "sift_peak_threshold": 4.0,
      "sift_edge_threshold": 10.0,
      "sift_magnification": 7.0,
      "sift_window_size": 2,
      "sift_back_matching": true,
      "matches_filter_knn": 25,
      "matches_filter_dev_factor": 3.0
    },
    "sparse_matching.pandora": {
      "save_intermediate_data": false,
      "method": "pandora",
      "connection_val": 3.0,
      "nb_pts_threshold": 80,
      "resolution": 4,
      "strip_margin": 30,
      "disparity_margin": 0.02,
      "confidence_filtering": {
        "activated": true,
        "upper_bound": 5,
        "lower_bound": -20,
        "risk_max": 60,
        "nan_threshold": 0.01,
        "win_nanratio": 20,
        "win_mean_risk_max": 7
      },
      "epipolar_error_upper_bound": 10.0,
      "epipolar_error_maximum_bias": 0.0,
      "minimum_nb_matches": 100,
      "elevation_delta_lower_bound": -500,
      "elevation_delta_upper_bound": 1000,
      "clusters_distance_threshold": null,
      "filtered_elt_pos": false,
      "matches_filter_knn": 25,
      "matches_filter_dev_factor": 3.0,
      "loader_conf": {
        "input": {},
        "pipeline": {
          "matching_cost": {
            "matching_cost_method": "census",
            "window_size": 11,
            "subpix": 1
          },
          "optimization": {
            "optimization_method": "sgm",
            "overcounting": true,
            "penalty": {
              "penalty_method": "sgm_penalty"
            }
          },
          "disparity": {
            "disparity_method": "wta",
            "invalid_disparity": "NaN"
          },
          "refinement": {
            "refinement_method": "vfit"
          },
          "filter": {
            "filter_method": "median",
            "filter_size": 3
          },
          "validation": {
            "validation_method": "cross_checking_accurate",
            "cross_checking_threshold": 1.0
          }
        }
      }
    },
    "dense_matching": {
      "save_intermediate_data": false,
      "method": "census_sgm_default",
      "min_epi_tile_size": 300,
      "max_epi_tile_size": 1500,
      "epipolar_tile_margin_in_percent": 60,
      "min_elevation_offset": null,
      "max_elevation_offset": null,
      "disp_min_threshold": null,
      "disp_max_threshold": null,
      "perf_eta_max_ambiguity": 0.99,
      "perf_eta_max_risk": 0.25,
      "perf_eta_step": 0.04,
      "perf_ambiguity_threshold": 0.6,
      "use_cross_validation": false,
      "use_global_disp_range": false,
      "local_disp_grid_step": 30,
      "disp_range_propagation_filter_size": 300,
      "generate_ambiguity": false,
      "performance_map_method": [],
      "loader": "pandora",
      "loader_conf": {
        "input": {},
        "pipeline": {
          "matching_cost": {
            "matching_cost_method": "census",
            "window_size": 5,
            "subpix": 1
          },
          "optimization": {
            "optimization_method": "sgm",
            "overcounting": false,
            "penalty": {
              "P1": 8,
              "P2": 32,
              "p2_method": "constant",
              "penalty_method": "sgm_penalty"
            }
          },
          "disparity": {
            "disparity_method": "wta",
            "invalid_disparity": "NaN"
          },
          "refinement": {
            "refinement_method": "vfit"
          },
          "filter": {
            "filter_method": "median",
            "filter_size": 3
          }
        }
      }
    },
    "triangulation": {
      "save_intermediate_data": false,
      "method": "line_of_sight_intersection",
      "snap_to_img1": false
    },
    "dem_generation": {
      "save_intermediate_data": false,
      "method": "dichotomic",
      "resolution": 90,
      "margin": 6000,
      "height_margin": 20,
      "percentile": 1,
      "min_number_matches": 100,
      "min_dem": -500,
      "max_dem": 1000,
      "fillnodata_max_search_distance": 5,
      "coregistration": true,
      "coregistration_max_shift": 180
    },
    "point_cloud_outlier_removal.1": {
      "save_intermediate_data": false,
      "method": "statistical",
      "save_by_pair": false,
      "use_median": true,
      "activated": true,
      "k": 50,
      "std_dev_factor": 5.0,
      "half_epipolar_size": 5
    },
    "point_cloud_outlier_removal.2": {
      "save_intermediate_data": false,
      "method": "statistical",
      "save_by_pair": false,
      "use_median": true,
      "activated": true,
      "k": 50,
      "std_dev_factor": 5.0,
      "half_epipolar_size": 5
    }
  }
}